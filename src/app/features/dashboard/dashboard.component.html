<div class="dashboard-container">
  <!-- Header -->
  <div class="dashboard-header">
    <h1 class="dashboard-title">Merchant Dashboard</h1>
    <div class="dashboard-actions">
      <button class="action-button refresh" (click)="refresh()" [disabled]="isLoading">
        <i class="fas fa-sync-alt"></i> {{ isLoading ? 'Loading...' : 'Refresh' }}
      </button>
      <button class="action-button export" (click)="onExport()">
        <i class="fas fa-file-export"></i> Export
      </button>
    </div>
  </div>

  <!-- Optional error -->
  <div *ngIf="errorMessage" class="error-banner">{{ errorMessage }}</div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card revenue">
      <div class="stat-icon">
        <i class="fas fa-dollar-sign"></i>
      </div>
      <div class="stat-content">
        <h3>Total Revenue</h3>
        <p>{{ (summary?.revenue || 0) | currency:'USD':'symbol':'1.0-0' }}</p>
        <span class="stat-trend positive">&nbsp;</span>
      </div>
    </div>

    <div class="stat-card orders">
      <div class="stat-icon">
        <i class="fas fa-shopping-bag"></i>
      </div>
      <div class="stat-content">
        <h3>Total Orders</h3>
        <p>{{ summary?.orders || 0 }}</p>
        <span class="stat-trend positive">&nbsp;</span>
      </div>
    </div>

    <div class="stat-card customers">
      <div class="stat-icon">
        <i class="fas fa-users"></i>
      </div>
      <div class="stat-content">
        <h3>Active Products</h3>
        <p>{{ summary?.activeProducts || 0 }}</p>
        <span class="stat-trend negative">&nbsp;</span>
      </div>
    </div>

    <div class="stat-card conversion">
      <div class="stat-icon">
        <i class="fas fa-chart-line"></i>
      </div>
      <div class="stat-content">
        <h3>Stores</h3>
        <p>{{ summary?.stores || 0 }}</p>
        <span class="stat-trend positive">&nbsp;</span>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="dashboard-content">
    <!-- Sales Chart -->
    <div class="dashboard-card chart-card">
      <div class="card-header">
        <h2>Monthly Sales Overview</h2>
        <select class="time-select">
          <option>Last 7 Days</option>
          <option selected>Last 30 Days</option>
          <option>This Year</option>
        </select>
      </div>
      <div class="chart-container">
        <canvas baseChart [data]="barChartData" [options]="barChartOptions" [type]="barType">
        </canvas>
      </div>
    </div>

    <!-- Upcoming Orders -->
    <div class="dashboard-card orders-card">
      <div class="card-header">
        <h2>Upcoming Orders</h2>
        <button class="view-all" (click)="onViewAll()">View All</button>
      </div>
      <div class="orders-table">
        <div class="table-header">
          <div>Order ID</div>
          <div>Customer</div>
          <div>Date</div>
          <div>Amount</div>
          <div>Status</div>
          <div>Action</div>
        </div>
        <ng-container *ngIf="recentOrders && recentOrders.length > 0; else noOrders">
          <div class="table-row" *ngFor="let o of recentOrders">
            <div>#{{ o.orderNumber }}</div>
            <div>{{ o.customer?.name || 'Guest' }}</div>
            <div>{{ o.createdAt | date:'medium' }}</div>
            <div>{{ o.total | currency:'USD':'symbol':'1.0-0' }}</div>
            <div><span class="status {{ o.status }}">{{ o.status }}</span></div>
            <div><button class="action-btn view" (click)="onViewOrder(o)">View</button></div>
          </div>
        </ng-container>
        <ng-template #noOrders>
          <div class="table-row">
            <div>No recent orders</div>
          </div>
        </ng-template>
      </div>
    </div>

    <!-- Recent Activity & Quick Actions -->
    <div class="flex-container">
      <!-- Recent Activity -->
      <div class="dashboard-card activity-card">
        <div class="card-header">
          <h2>Recent Activity</h2>
        </div>
        <div class="activity-list">
          <div class="activity-item">
            <div class="activity-icon new-order">
              <i class="fas fa-shopping-cart"></i>
            </div>
            <div class="activity-content">
              <p>Pending: {{ summary?.pending || 0 }} | Processing: {{ summary?.processing || 0 }}</p>
              <span class="activity-time">Shipped: {{ summary?.shipped || 0 }} | Delivered: {{ summary?.delivered || 0
                }}</span>
            </div>
          </div>
          <div class="activity-item">
            <div class="activity-icon return">
              <i class="fas fa-undo"></i>
            </div>
            <div class="activity-content">
              <p>Cancelled: {{ summary?.cancelled || 0 }} | Returned: {{ summary?.returned || 0 }}</p>
              <span class="activity-time">&nbsp;</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="dashboard-card quick-actions-card">
        <div class="card-header">
          <h2>Quick Actions</h2>
        </div>
        <div class="actions-grid">
          <button class="quick-action" (click)="onAddProduct()">
            <i class="fas fa-plus"></i>
            <span>Add Product</span>
          </button>
          <button class="quick-action" (click)="onManageInventory()">
            <i class="fas fa-tags"></i>
            <span>Manage Inventory</span>
          </button>
          <button class="quick-action" (click)="onViewReports()">
            <i class="fas fa-chart-pie"></i>
            <span>View Reports</span>
          </button>
          <button class="quick-action" (click)="onSendNewsletter()">
            <i class="fas fa-envelope"></i>
            <span>Send Newsletter</span>
          </button>
          <button class="quick-action" (click)="onOpenSettings()">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
          </button>
          <button class="quick-action" (click)="onOpenHelp()">
            <i class="fas fa-question-circle"></i>
            <span>Help Center</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>